# Project Flow - 启动说明

## 🚀 快速启动

### macOS / Linux 用户

**方式1: 双击启动 (推荐)**
1. 双击 `macOS一键启动.sh` 文件
2. 如果提示"无法打开",右键点击 → 打开 → 仍要打开

**方式2: 终端启动**
```bash
./macOS一键启动.sh
```

如果提示权限错误,先运行:
```bash
chmod +x macOS一键启动.sh
```

---

### Windows 用户

**方式1: 双击启动 (推荐)**
1. 双击 `Windows一键启动.bat` 文件
2. 等待自动启动

**方式2: 命令行启动**
```cmd
Windows一键启动.bat
```

---

## 📋 脚本功能

启动脚本会自动完成以下步骤:

1. ✅ **检查 Node.js 环境**
   - 检测是否已安装 Node.js
   - 如未安装,提示下载地址

2. ✅ **配置中国大陆镜像源**
   - 自动设置淘宝 npm 镜像
   - 加速依赖下载

3. ✅ **安装项目依赖**
   - 首次运行自动安装所有依赖
   - 后续运行跳过此步骤

4. ✅ **启动开发服务器**
   - 自动启动 Vite 开发服务器
   - 默认地址: http://localhost:3000

---

## 🔧 环境要求

### 必需软件
- **Node.js**: v18.0.0 或更高版本
  - macOS: https://nodejs.org/zh-cn/
  - Windows: https://nodejs.org/zh-cn/

### 可选软件
- **Homebrew** (macOS): 用于安装 Node.js
  ```bash
  brew install node
  ```

---

## 🎮 使用说明

### 启动后操作

1. **等待服务器启动**
   - 首次启动需要安装依赖,约1-3分钟
   - 后续启动仅需几秒钟

2. **打开浏览器**
   - 服务器启动后,访问显示的地址
   - 通常是 http://localhost:3000

3. **开始体验**
   - 点击 "START ENGINE" 按钮
   - 按任意键盘按键触发音符
   - 观察能量条和视觉效果变化

### 停止服务器

- **macOS/Linux**: 按 `Ctrl + C`
- **Windows**: 按 `Ctrl + C`,然后选择 `Y`

---

## 🎵 能量系统说明

### 能量阶段

| 能量值 | 阶段 | 特征 |
|--------|------|------|
| 0.0 - 0.35 | **Idle** (闲置) | 深蓝背景,温暖Pad音色 |
| 0.35 - 0.55 | **Groove** (律动) | 紫色背景,拨弦音色 + Chorus |
| 0.55 - 0.75 | **Building** (积蓄) | 渐变背景,Bell层叠加 + Phaser |
| 0.75 - 0.90 | **Peak** (高潮) | 红粉背景,三层音色 + 微妙失真 |
| 0.90 - 1.0 | **Ultra** (超越) | 霓虹背景,终极音色 + BitCrusher |

### 操作技巧

- **慢速按键**: 感受每个阶段的音色变化
- **快速按键**: 快速冲刺到高潮阶段
- **持续互动**: 保持能量不衰减
- **停止按键**: 能量会缓慢衰减

---

## ❓ 常见问题

### Q1: 提示"未检测到 Node.js"
**解决方案**:
1. 访问 https://nodejs.org/zh-cn/
2. 下载并安装 LTS 版本
3. 重启终端/命令行
4. 重新运行启动脚本

### Q2: 依赖安装失败
**解决方案**:
1. 检查网络连接
2. 脚本已自动配置淘宝镜像
3. 手动运行: `npm install`
4. 如仍失败,尝试切换网络

### Q3: macOS 提示"无法打开"
**解决方案**:
1. 右键点击脚本文件
2. 选择"打开"
3. 点击"仍要打开"
4. 或运行: `chmod +x macOS一键启动.sh`

### Q4: Windows 提示"无法识别"
**解决方案**:
1. 右键点击脚本文件
2. 选择"以管理员身份运行"
3. 或在 PowerShell 中运行

### Q5: 端口被占用
**解决方案**:
- Vite 会自动尝试其他端口 (3001, 3002...)
- 查看终端输出的实际地址

---

## 📦 手动启动 (高级用户)

如果你熟悉命令行,也可以手动启动:

```bash
# 1. 安装依赖 (首次)
npm install

# 2. 启动开发服务器
npm run dev

# 3. 构建生产版本 (可选)
npm run build

# 4. 预览生产版本 (可选)
npm run preview
```

---

## 🌐 镜像源配置

脚本已自动配置淘宝镜像源,如需手动配置:

```bash
# 设置淘宝镜像
npm config set registry https://registry.npmmirror.com

# 查看当前镜像
npm config get registry

# 恢复官方镜像
npm config set registry https://registry.npmjs.org
```

---

## 📞 技术支持

如遇到其他问题:
1. 检查 Node.js 版本: `node -v`
2. 检查 npm 版本: `npm -v`
3. 查看错误日志
4. 尝试删除 `node_modules` 文件夹后重新安装

---

## 🎨 项目信息

- **名称**: Project Flow
- **版本**: 0.8
- **技术栈**: React + Tone.js + P5.js + Vite
- **音乐系统**: F小调五声音阶,4阶段音色演化

---

**享受音乐创作的乐趣! 🎵✨**
